<%= form_with(model: member, local: true) do |form| %>
  <% if member.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(member.errors.count, "error") %> prohibited this member from being saved:</h2>

      <ul>
      <% member.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field form-group">
    <%= form.label :first_name, "First Name" %>
    <%= form.text_field :first_name, 
                        id: :member_first_name,
                        :class => "form-control",
                        :required => true %>
  </div>

  <div class="field form-group">
    <%= form.label :last_name, "Last Name" %>
    <%= form.text_field :last_name, 
                        id: :member_last_name,
                        :class => "form-control",
                        :required => true %>
  </div>

  <div class="field form-group">
    <%= form.label :address_line_1, "Address Line 1" %>
    <%= form.text_field :address_line_1, 
                        id: :member_address_line_1,
                        :class => "form-control",
                        :required => true %>
  </div>

  <div class="field form-group">
    <%= form.label :address_line_2, "Address Line 2" %>
    <%= form.text_field :address_line_2, 
                        id: :member_address_line_2,
                        :class => "form-control",
                        :required => true %>
  </div>

  <div class="field form-group">
    <%= form.label :town %>
    <%= form.text_field :town, 
                        id: :member_town,
                        :class => "form-control",
                        :required => true %>
  </div>

  <div class="field form-group">
    <%= form.label :post_code, "Post Code" %>
    <%= form.text_field :post_code, 
                        id: :member_post_code,
                        :class => "form-control",
                        :required => true %>
  </div>

  <div class="field form-group">
    <%= form.label :tel_no, "Telephone Number" %>
    <%= form.text_field :tel_no, 
                        id: :member_tel_no,
                        :class => "form-control",
                        :required => true %>
  </div>

  <div class="field form-group">
    <%= form.label :email, "Email" %>
    <%= form.email_field :email, 
                        id: :member_email,
                        :class => "form-control",
                        :required => true %>
    <small class="form-text text-muted">You'll be using it to log in!</small>
  </div>

  <div class="field form-group">
    <%= form.label :password, "Password" %>
    <%= form.password_field :password, 
                        id: :member_password,
                        :class => "form-control",
                        :required => true %>
    <small class="form-text text-muted">A secure password has letters, numbers, and symbols!</small>
  </div>

  <div class="field form-group">
    <%= form.label :password_confirmation, "Password Confirmation" %>
    <%= form.password_field :password_confirmation, 
                        id: :member_password_confirmation,
                        :class => "form-control",
                        :required => true %>
    <small class="form-text text-muted">Must be the same as the one above!</small>
  </div>

  <%= form.hidden_field :type, value: "Member" %>

  <%= form.hidden_field :plan, value: 1 %>

            <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
              data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
              data-description="Unlimited - Paperback 2"
              data-amount="999"
              data-currency="gbp"
              data-panelLabel="Subscribe for"
              data-label="Subscribe"
              data-locale="auto"></script>

  <div class="actions">
    <%= form.submit (form.object.new_record? ? "Create Account" : "Update Details"),
                    :class => "btn btn-primary btn-block" %>
  </div>
<% end %>
